总线数据的流量控制是指通过控制数据在总线上的传输速度，以确保网络传输的可靠性和稳定性。在总线上，一旦多个设备同时发送数据，就可能会出现数据冲突的问题，影响网络数据传输的效率和质量。因此，需要流量控制机制来限制总线上发送数据的速率，防止出现这种问题。

## 停止等待

发送方发送数据后等待来自接收方的应答帧，接收到正确的应答帧（ACK）才发送下一帧数据。

## 滑动窗口

用一个 ACK 应答确认多个应答帧，即将窗口往后滑动一定的距离。窗口大小根据总线情况动态调整。

- 发收双方对数据帧以模 n方式编号，依次为 0 到 n-1 。
- 窗口最大为 n-1 。
- 接收方发送的 ACK 中有**预期接收**的**下一帧**的编号。

### 右边界移动规则

#### 发送方窗口

- 传输开始时处于最大状态 n-1 。
- 每发出一帧，窗口左边界向右移动，窗口大小减 1 。
- 模减收到的 ACK 中的编号得出窗口向右移动数目。

![Pasted image 20230511211307](http://pic.qiniu.kicre.top/Pasted%20image%2020230511211307.png)

> 如图，口大小初始为7，假设第0～4号帧已经发送，而且还没有收到应答，窗口中仅包含两帧（5号和 6号）。如果这时收到带有编号为3 的应答帧，则表明有3—0—3帧（0， 1， 2号帧）已被正确接收，发送方可以将接下来的3帧加入窗口中，窗口中的数据帧编号为5， 6，7，0， 1 。

#### 接收方窗口

- 接收方窗口中是为接受数据**保留的存储空间**。
- 初始时处于最大状态 n-1 。
- 接收数据，窗口左边界右移，窗口减小。
- 取走数据，发出 ACK 帧。
- 模减 ACK 编号得出右边界移动数目。
